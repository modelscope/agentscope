<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Memory and Message Management &mdash; AgentScope  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Prompt Engine" href="206-prompt.html" />
    <link rel="prev" title="Enhancing Agent Capabilities with Service Functions" href="204-service.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            AgentScope
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">AgentScope Tutorial</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quick_start.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="advance.html">Advanced Exploration</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="201-agent.html">Customizing Your Own Agent</a></li>
<li class="toctree-l2"><a class="reference internal" href="202-pipeline.html">Agent Interactions: Dive deeper into Pipelines and Message Hub</a></li>
<li class="toctree-l2"><a class="reference internal" href="203-model.html">Using Different Model Sources with Model API</a></li>
<li class="toctree-l2"><a class="reference internal" href="204-service.html">Enhancing Agent Capabilities with Service Functions</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Memory and Message Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#understanding-messagebase-and-its-subclasses">Understanding <code class="docutils literal notranslate"><span class="pre">MessageBase</span></code> and its subclasses</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#messagebase"><code class="docutils literal notranslate"><span class="pre">MessageBase</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#msg"><code class="docutils literal notranslate"><span class="pre">Msg</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tht"><code class="docutils literal notranslate"><span class="pre">Tht</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#understanding-memorybase-and-its-subclasses">Understanding <code class="docutils literal notranslate"><span class="pre">MemoryBase</span></code> and its subclasses</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#memorybase"><code class="docutils literal notranslate"><span class="pre">MemoryBase</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#temporarymemory"><code class="docutils literal notranslate"><span class="pre">TemporaryMemory</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="206-prompt.html">Prompt Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="207-monitor.html">Monitor</a></li>
<li class="toctree-l2"><a class="reference internal" href="208-distribute.html">Make Your Applications Distributed</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contribute.html">Get Involved</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">AgentScope API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../agentscope.agents.html">Agents package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../agentscope.memory.html">Memory package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../agentscope.models.html">Models package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../agentscope.pipelines.html">Pipelines package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../agentscope.service.html">Service package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../agentscope.rpc.html">RPC package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../agentscope.utils.html">Utils package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../agentscope.web_ui.html">Web UI package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../agentscope.html">Module contents</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">AgentScope</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="advance.html">Advanced Exploration</a></li>
      <li class="breadcrumb-item active">Memory and Message Management</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/tutorial/205-memory.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="memory-and-message-management">
<span id="memory"></span><h1>Memory and Message Management<a class="headerlink" href="#memory-and-message-management" title="Link to this heading"></a></h1>
<p><strong>Message</strong> represents individual pieces of information or interactions flowing between/within agents. <strong>Memory</strong> refers to the storage and retrieval of historical information and serves as the storage and management system for the messages. This allows the agent to remember past interactions, maintain context, and provide more coherent and relevant responses.</p>
<section id="understanding-messagebase-and-its-subclasses">
<h2>Understanding <code class="docutils literal notranslate"><span class="pre">MessageBase</span></code> and its subclasses<a class="headerlink" href="#understanding-messagebase-and-its-subclasses" title="Link to this heading"></a></h2>
<section id="messagebase">
<h3><code class="docutils literal notranslate"><span class="pre">MessageBase</span></code><a class="headerlink" href="#messagebase" title="Link to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">MessageBase</span></code> is designed to organize attributes of a message, like the agent’s name, the content, and associated media URLs. It provides a structure that can be extended to create specific types of messages.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MessageBase</span><span class="p">(</span><span class="nb">dict</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">content</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
        <span class="n">url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">timestamp</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">uuid4</span><span class="p">()</span><span class="o">.</span><span class="n">hex</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="ow">or</span> <span class="n">_get_timestamp</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="n">content</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">to_str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="c1"># ... [code omitted for brevity]</span>
</pre></div>
</div>
<p>Here are the key attributes managed by the <code class="docutils literal notranslate"><span class="pre">MessageBase</span></code> class:</p>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">name</span></code></strong>: This attribute denotes the originator of the message. It’s a critical piece of metadata, useful in scenarios where distinguishing between different speakers is necessary.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">content</span></code></strong>: The substance of the message itself. It can include text, structured data, or any other form of content that is relevant to the interaction and requires processing by the agent.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">url</span></code></strong>: An optional attribute that allows the message to be linked to external resources. These can be direct links to files, multi-modal data, or web pages.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">timestamp</span></code></strong>: A timestamp indicating when the message was created.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">id</span></code></strong>: Each message is assigned a unique identifier (ID) upon creation.</p></li>
</ul>
</section>
<section id="msg">
<h3><code class="docutils literal notranslate"><span class="pre">Msg</span></code><a class="headerlink" href="#msg" title="Link to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">Msg</span></code> (“Message”) subclass extends <code class="docutils literal notranslate"><span class="pre">MessageBase</span></code> and represents a standard <em>message</em>.  <code class="docutils literal notranslate"><span class="pre">Msg</span></code> provides concrete definitions for the <code class="docutils literal notranslate"><span class="pre">to_str</span></code> and <code class="docutils literal notranslate"><span class="pre">serialize</span></code> methods to enable string representation and serialization suitable for the agent’s operational context.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Msg</span><span class="p">(</span><span class="n">MessageBase</span><span class="p">):</span>
    <span class="c1"># ... [code omitted for brevity]</span>

    <span class="k">def</span> <span class="nf">to_str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s2">&quot;__type&quot;</span><span class="p">:</span> <span class="s2">&quot;Msg&quot;</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="p">})</span>

<span class="c1"># `Msg` logs</span>
<span class="o">&gt;&gt;</span> <span class="n">Someone</span><span class="p">:</span> <span class="n">I</span> <span class="n">should</span> <span class="o">...</span>
</pre></div>
</div>
</section>
<section id="tht">
<h3><code class="docutils literal notranslate"><span class="pre">Tht</span></code><a class="headerlink" href="#tht" title="Link to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">Tht</span></code> (“Thought”) subclass is a specialized form of <code class="docutils literal notranslate"><span class="pre">MessageBase</span></code> used for encapsulating processes of an agent’s internal thought. The thought is not sent outwardly but is instead used internally by the agent. As with <code class="docutils literal notranslate"><span class="pre">Msg</span></code>, specific implementations of <code class="docutils literal notranslate"><span class="pre">Tht</span></code> will define <code class="docutils literal notranslate"><span class="pre">to_str</span></code> and <code class="docutils literal notranslate"><span class="pre">serialize</span></code> methods to handle the unique requirements of representing and serializing an agent’s thoughts.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Tht</span><span class="p">(</span><span class="n">MessageBase</span><span class="p">):</span>
    <span class="c1"># ... [code omitted for brevity]</span>

    <span class="k">def</span> <span class="nf">to_str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> thought: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s2">&quot;__type&quot;</span><span class="p">:</span> <span class="s2">&quot;Tht&quot;</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="p">})</span>

<span class="o">&gt;&gt;</span> <span class="n">Someone</span> <span class="n">thought</span><span class="p">:</span> <span class="n">I</span> <span class="n">should</span> <span class="o">...</span>
</pre></div>
</div>
</section>
</section>
<section id="understanding-memorybase-and-its-subclasses">
<h2>Understanding <code class="docutils literal notranslate"><span class="pre">MemoryBase</span></code> and its subclasses<a class="headerlink" href="#understanding-memorybase-and-its-subclasses" title="Link to this heading"></a></h2>
<section id="memorybase">
<h3><code class="docutils literal notranslate"><span class="pre">MemoryBase</span></code><a class="headerlink" href="#memorybase" title="Link to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">MemoryBase</span></code> is an abstract class that handles an agent’s memory in a structured way. It defines operations for storing, retrieving, deleting, and manipulating <em>message</em>’s content.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MemoryBase</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="c1"># ... [code omitted for brevity]</span>

    <span class="k">def</span> <span class="nf">get_memory</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">return_type</span><span class="p">:</span> <span class="n">PromptType</span> <span class="o">=</span> <span class="n">PromptType</span><span class="o">.</span><span class="n">LIST</span><span class="p">,</span>
        <span class="n">recent_n</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">filter_func</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">dict</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">memories</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">],</span> <span class="nb">dict</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Iterable</span><span class="p">,</span> <span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">load</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">memories</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">,</span> <span class="nb">list</span><span class="p">],</span>
        <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">export</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">to_mem</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">file_path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">size</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>
</pre></div>
</div>
<p>Here are the key methods of <code class="docutils literal notranslate"><span class="pre">MemoryBase</span></code>:</p>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">get_memory</span></code></strong>: This method is responsible for retrieving stored messages from the agent’s memory. It can return these messages in different formats as specified by the <code class="docutils literal notranslate"><span class="pre">return_type</span></code>. The method can also retrieve a specific number of recent messages if <code class="docutils literal notranslate"><span class="pre">recent_n</span></code> is provided, and it can apply a filtering function (<code class="docutils literal notranslate"><span class="pre">filter_func</span></code>) to select messages based on custom criteria.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">add</span></code></strong>: This method is used to add a new <em>message</em> to the agent’s memory. It can accept a single message or a list of messages. Each message is typically an instance of <code class="docutils literal notranslate"><span class="pre">MessageBase</span></code> or its subclasses.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">delete</span></code></strong>: This method enables the removal of messages from memory by their index (or indices if an iterable is provided).</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">load</span></code></strong>: This method allows for the bulk loading of messages into the agent’s memory from an external source. The <code class="docutils literal notranslate"><span class="pre">overwrite</span></code> parameter determines whether to clear the existing memory before loading the new set of messages.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">export</span></code></strong>: This method facilitates exporting the stored <em>message</em> from the agent’s memory either to an external file (specified by <code class="docutils literal notranslate"><span class="pre">file_path</span></code>) or directly into the working memory of the program (if <code class="docutils literal notranslate"><span class="pre">to_mem</span></code> is set to <code class="docutils literal notranslate"><span class="pre">True</span></code>).</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">clear</span></code></strong>: This method purges all <em>message</em> from the agent’s memory, essentially resetting it.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">size</span></code></strong>: This method returns the number of messages currently stored in the agent’s memory.</p></li>
</ul>
</section>
<section id="temporarymemory">
<h3><code class="docutils literal notranslate"><span class="pre">TemporaryMemory</span></code><a class="headerlink" href="#temporarymemory" title="Link to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">TemporaryMemory</span></code> class is a concrete implementation of <code class="docutils literal notranslate"><span class="pre">MemoryBase</span></code>, providing a memory store that exists during the runtime of an agent, which is used as the default memory type of agents. Besides all the behaviors from <code class="docutils literal notranslate"><span class="pre">MemoryBase</span></code>, the <code class="docutils literal notranslate"><span class="pre">TemporaryMemory</span></code> additionally provides methods for retrieval:</p>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">retrieve_by_embedding</span></code></strong>: Retrieves <code class="docutils literal notranslate"><span class="pre">messages</span></code> that are most similar to a query, based on their embeddings. It uses a provided metric to determine the relevance and can return the top <code class="docutils literal notranslate"><span class="pre">k</span></code> most relevant messages.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">get_embeddings</span></code></strong>: Return the embeddings for all messages in memory. If a message does not have an embedding and an embedding model is provided, it will generate and store the embedding for the message.</p></li>
</ul>
<p>For more details about the usage of <code class="docutils literal notranslate"><span class="pre">Memory</span></code> and <code class="docutils literal notranslate"><span class="pre">Msg</span></code>, please refer to the API references.</p>
<p><a class="reference internal" href="#memory-and-message-management"><span class="xref myst">[Return to the top]</span></a></p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="204-service.html" class="btn btn-neutral float-left" title="Enhancing Agent Capabilities with Service Functions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="206-prompt.html" class="btn btn-neutral float-right" title="Prompt Engine" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Alibaba Tongyi Lab.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>