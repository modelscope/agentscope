{
  "meta": {
    "index": 3,
    "title": "Story",
    "author": "AgentScopeTeam",
    "category": "tool",
    "time": "2024-09-04",
    "thumbnail": "",
    "description": "multi-modal story generator"
  },
  "drawflow": {
    "Home": {
      "data": {
        "2": {
          "id": 2,
          "name": "dashscope_chat",
          "data": {
            "args": {
              "config_name": "qwen",
              "model_name": "qwen-max",
              "api_key": "",
              "temperature": 0,
              "seed": 0,
              "model_type": "dashscope_chat",
              "messages_key": "input"
            }
          },
          "class": "dashscope_chat",
          "typenode": false,
          "inputs": {},
          "outputs": {},
          "pos_x": -10,
          "pos_y": 11
        },
        "4": {
          "id": 4,
          "name": "Message",
          "data": {
            "args": {
              "name": "Host",
              "content": "请输入您想生成的绘本故事大纲",
              "url": "",
              "role": "assistant"
            }
          },
          "class": "Message",
          "typenode": false,
          "inputs": {
            "input_1": {
              "connections": []
            }
          },
          "outputs": {
            "output_1": {
              "connections": [
                {
                  "node": "5",
                  "output": "input_1"
                }
              ]
            }
          },
          "pos_x": -15,
          "pos_y": 300
        },
        "5": {
          "id": 5,
          "name": "UserAgent",
          "data": {
            "args": {
              "name": "User"
            }
          },
          "class": "UserAgent",
          "typenode": false,
          "inputs": {
            "input_1": {
              "connections": [
                {
                  "node": "4",
                  "input": "output_1"
                }
              ]
            }
          },
          "outputs": {
            "output_1": {
              "connections": [
                {
                  "node": "6",
                  "output": "input_1"
                },
                {
                  "node": "7",
                  "output": "input_1"
                },
                {
                  "node": "8",
                  "output": "input_1"
                },
                {
                  "node": "9",
                  "output": "input_1"
                }
              ]
            }
          },
          "pos_x": -18,
          "pos_y": 462
        },
        "6": {
          "id": 6,
          "name": "DialogAgent",
          "data": {
            "args": {
              "name": "第一幕",
              "sys_prompt": "你是一个绘本故事生成助手，绘本故事一共有四幕。请根据大纲，发挥想象，只生成第一幕的描述，不超过30个字。\n# 输出格式为\n第一幕：xxxx",
              "model_config_name": "qwen"
            }
          },
          "class": "DialogAgent",
          "typenode": false,
          "inputs": {
            "input_1": {
              "connections": [
                {
                  "node": "5",
                  "input": "output_1"
                }
              ]
            }
          },
          "outputs": {
            "output_1": {
              "connections": [
                {
                  "node": "7",
                  "output": "input_1"
                },
                {
                  "node": "10",
                  "output": "input_1"
                },
                {
                  "node": "14",
                  "output": "input_1"
                },
                {
                  "node": "8",
                  "output": "input_1"
                },
                {
                  "node": "9",
                  "output": "input_1"
                }
              ]
            }
          },
          "pos_x": 354,
          "pos_y": 37
        },
        "7": {
          "id": 7,
          "name": "DialogAgent",
          "data": {
            "args": {
              "name": "第二幕",
              "sys_prompt": "你是一个绘本故事生成助手，绘本故事一共有四幕。请根据用户提供的绘本大纲和第一幕的内容，只生成第二幕的描述，不超过30个字。\n# 输出格式为\n第二幕：xxxx",
              "model_config_name": "qwen"
            }
          },
          "class": "DialogAgent",
          "typenode": false,
          "inputs": {
            "input_1": {
              "connections": [
                {
                  "node": "6",
                  "input": "output_1"
                },
                {
                  "node": "5",
                  "input": "output_1"
                }
              ]
            }
          },
          "outputs": {
            "output_1": {
              "connections": [
                {
                  "node": "8",
                  "output": "input_1"
                },
                {
                  "node": "11",
                  "output": "input_1"
                },
                {
                  "node": "14",
                  "output": "input_1"
                },
                {
                  "node": "9",
                  "output": "input_1"
                }
              ]
            }
          },
          "pos_x": 359,
          "pos_y": 160
        },
        "8": {
          "id": 8,
          "name": "DialogAgent",
          "data": {
            "args": {
              "name": "第三幕",
              "sys_prompt": "你是一个绘本故事生成助手，绘本故事一共有四幕。请根据用户提供的大纲和前二幕的内容，只生成第三幕的描述，不超过30个字。\n# 输出格式为\n第三幕：xxxx",
              "model_config_name": "qwen"
            }
          },
          "class": "DialogAgent",
          "typenode": false,
          "inputs": {
            "input_1": {
              "connections": [
                {
                  "node": "7",
                  "input": "output_1"
                },
                {
                  "node": "6",
                  "input": "output_1"
                },
                {
                  "node": "5",
                  "input": "output_1"
                }
              ]
            }
          },
          "outputs": {
            "output_1": {
              "connections": [
                {
                  "node": "9",
                  "output": "input_1"
                },
                {
                  "node": "12",
                  "output": "input_1"
                },
                {
                  "node": "14",
                  "output": "input_1"
                }
              ]
            }
          },
          "pos_x": 362,
          "pos_y": 287
        },
        "9": {
          "id": 9,
          "name": "DialogAgent",
          "data": {
            "args": {
              "name": "第四幕",
              "sys_prompt": "你是一个绘本故事生成助手，绘本故事一共有四幕。请根据用户提供的大纲和前三幕的内容，只生成第四幕的描述，不超过30个字。\n# 输出格式为\n第四幕：xxxx",
              "model_config_name": "qwen"
            }
          },
          "class": "DialogAgent",
          "typenode": false,
          "inputs": {
            "input_1": {
              "connections": [
                {
                  "node": "8",
                  "input": "output_1"
                },
                {
                  "node": "5",
                  "input": "output_1"
                },
                {
                  "node": "6",
                  "input": "output_1"
                },
                {
                  "node": "7",
                  "input": "output_1"
                }
              ]
            }
          },
          "outputs": {
            "output_1": {
              "connections": [
                {
                  "node": "13",
                  "output": "input_1"
                },
                {
                  "node": "14",
                  "output": "input_1"
                }
              ]
            }
          },
          "pos_x": 356,
          "pos_y": 424
        },
        "10": {
          "id": 10,
          "name": "ImageSynthesis",
          "data": {
            "args": {
              "model": "wanx-v1",
              "api_key": "",
              "n": 1,
              "size": "1024*1024",
              "save_dir": ""
            }
          },
          "class": "ImageSynthesis",
          "typenode": false,
          "inputs": {
            "input_1": {
              "connections": [
                {
                  "node": "6",
                  "input": "output_1"
                }
              ]
            }
          },
          "outputs": {
            "output_1": {
              "connections": [
                {
                  "node": "14",
                  "output": "input_1"
                }
              ]
            }
          },
          "pos_x": 715,
          "pos_y": 28
        },
        "11": {
          "id": 11,
          "name": "ImageSynthesis",
          "data": {
            "args": {
              "model": "wanx-v1",
              "api_key": "",
              "n": 1,
              "size": "1024*1024",
              "save_dir": ""
            }
          },
          "class": "ImageSynthesis",
          "typenode": false,
          "inputs": {
            "input_1": {
              "connections": [
                {
                  "node": "7",
                  "input": "output_1"
                }
              ]
            }
          },
          "outputs": {
            "output_1": {
              "connections": [
                {
                  "node": "14",
                  "output": "input_1"
                }
              ]
            }
          },
          "pos_x": 722,
          "pos_y": 136
        },
        "12": {
          "id": 12,
          "name": "ImageSynthesis",
          "data": {
            "args": {
              "model": "wanx-v1",
              "api_key": "",
              "n": 1,
              "size": "1024*1024",
              "save_dir": ""
            }
          },
          "class": "ImageSynthesis",
          "typenode": false,
          "inputs": {
            "input_1": {
              "connections": [
                {
                  "node": "8",
                  "input": "output_1"
                }
              ]
            }
          },
          "outputs": {
            "output_1": {
              "connections": [
                {
                  "node": "14",
                  "output": "input_1"
                }
              ]
            }
          },
          "pos_x": 733,
          "pos_y": 264
        },
        "13": {
          "id": 13,
          "name": "ImageSynthesis",
          "data": {
            "args": {
              "model": "wanx-v1",
              "api_key": "",
              "n": 1,
              "size": "1024*1024",
              "save_dir": ""
            }
          },
          "class": "ImageSynthesis",
          "typenode": false,
          "inputs": {
            "input_1": {
              "connections": [
                {
                  "node": "9",
                  "input": "output_1"
                }
              ]
            }
          },
          "outputs": {
            "output_1": {
              "connections": [
                {
                  "node": "14",
                  "output": "input_1"
                }
              ]
            }
          },
          "pos_x": 727,
          "pos_y": 412
        },
        "14": {
          "id": 14,
          "name": "ImageComposition",
          "data": {
            "args": {
              "titles": "[\"第一幕\", \"第二幕\", \"第三幕\", \"第四幕\"]",
              "output_path": "test.png",
              "row": 2,
              "column": 2,
              "spacing": 10,
              "title_height": 100,
              "font_name": "PingFang"
            }
          },
          "class": "ImageComposition",
          "typenode": false,
          "inputs": {
            "input_1": {
              "connections": [
                {
                  "node": "10",
                  "input": "output_1"
                },
                {
                  "node": "11",
                  "input": "output_1"
                },
                {
                  "node": "12",
                  "input": "output_1"
                },
                {
                  "node": "13",
                  "input": "output_1"
                },
                {
                  "node": "6",
                  "input": "output_1"
                },
                {
                  "node": "7",
                  "input": "output_1"
                },
                {
                  "node": "8",
                  "input": "output_1"
                },
                {
                  "node": "9",
                  "input": "output_1"
                }
              ]
            }
          },
          "outputs": {
            "output_1": {
              "connections": []
            }
          },
          "pos_x": 1101,
          "pos_y": -17.88888888888889
        }
      }
    }
  }
}